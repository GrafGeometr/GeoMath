{% extends "base.html" %}

{% block content %}
<header>
    <form action="" method="post" class="navbar navbar-light bg-light">
        {{ form.hidden_tag() }}
        <div class="alert alert-dark">
            <p>{{ form.geom() }} {{ form.geom.label }} </p>
            <p>{{ form.algb() }} {{ form.algb.label }} </p>
            <p>{{ form.comb() }} {{ form.comb.label }} </p>
        </div>
        <div class="alert alert-dark">
            <p>{{ form.posts() }} {{ form.posts.label }} </p>
            <p>{{ form.solprob() }} {{ form.solprob.label }} </p>
            <p>{{ form.nosolprob() }} {{ form.nosolprob.label }} </p>
        </div>
        <div class="alert alert-dark">
            Временные рамки:
            {{ form.time(class="btn btn-secondary") }}
        </div>
        <div class="alert alert-dark">
            Теги(через запятую):
            {{ form.tegs(class="form-control") }}
        </div>
        <div class="alert alert-dark">{{ form.submit(type="submit", class="btn btn-primary") }}</div>
    </form>
</header>
{% if message %}
<div>{{ message }}</div>
{% endif %}
{% for counter in range(publications|length) %}
    {% set publ = publications[counter] %}
    <div class="alert alert-dark">
        <div class="alert alert-secondary">
            {% if isinstance(publ, Post) %}
            {% with post=publ %}
            {% include "post_short.html" %}
            <a href="/post/{{ post.id }}" class="btn btn-primary">Смотреть комментарии</a>
            {% endwith %}
            {% endif %}
            {% if isinstance(publ, Problem) %}
            {% with problem=publ %}
            {% include "problem_short.html" %}
            {% if problem.solutions %}
            <a href="/problem/{{ problem.id }}" class="btn btn-primary">Смотреть комментарии и решения</a>
            {% else %}
            <a href="/problem/{{ problem.id }}" class="btn btn-primary">Смотреть комментарии</a>
            {% endif %}
            {% endwith %}
            {% endif %}
        </div>
    </div>
{% endfor %}
{% endblock %}